<!doctype html>
<html lang="en-US">
  <head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
    <link rel="stylesheet" href="./pkg/assets/main.css">
  </head>
  <body>
    <div id="container">
      <div id="current-mood">
        <div>Duviri Mood Spiral</div>
        <h1 id="mood"></h1>
        <div id="time"></div>
      </div>
      <div id="next-mood"></div>
    </div>
    
    <script type="module">
      import init, * as wasm from "./pkg/duviri_mood_clock_wasm.js";
      init().then(() => {
        const curr_mood = JSON.parse(wasm.get_current_mood())
        const next_moods = JSON.parse(wasm.get_next_mood((Date.now() / 1000).toFixed(), 3));
        
        let current_mood_el = document.getElementById("mood")
        let current_time_el = document.getElementById("time")
        let next_el = document.getElementById("next-mood")

        let current_time = new Date(curr_mood.time)
        current_mood_el.innerText = curr_mood.mood
        current_time_el.innerText = `${current_time.toLocaleString()}`

        console.log(next_moods)

        for (let mood of next_moods) {
          console.log(mood)
          next_el.innerText = `${next_el.innerText}\nNext Mood: ${mood.mood} @ ${mood.time}`
        }
      });
    </script>
  </body>
</html